{% extends "base.html" %}
{% block title %}Quản lý tài khoản{% endblock %}
{% block content %}
<h2 class="mb-4">Quản lý tài khoản</h2>

<a href="{% url 'account_add' %}" class="btn btn-success mb-3">
  + Thêm người dùng mới
</a>

<div class="table-responsive">
  <table class="table table-striped table-hover align-middle">
    <thead class="table-dark">
      <tr>
        <th scope="col">STT</th>
        <th scope="col">Tên đăng nhập</th>
        <th scope="col">Họ tên</th>
        <th scope="col">Email</th>
        <th scope="col" class="text-center">Vai trò</th>
        <th scope="col" class="text-center">Trạng thái</th>
        <th scope="col" class="text-center">Hành động</th>
      </tr>
    </thead>
    <tbody>
      {% for user in users %}
      <tr>
        <th scope="row">{{ forloop.counter }}</th>
        <td>{{ user.username }}</td>
        <td>{{ user.get_full_name|default:'(Chưa có)' }}</td>
        <td>{{ user.email|default:'(Chưa có)' }}</td>
        <td class="text-center">
          {% if user.is_superuser %}
          <span class="badge bg-danger">Superuser</span>
          {% elif user.is_staff %}
          <span class="badge bg-warning text-dark">Admin</span>
          {% else %}
          <span class="badge bg-info text-dark">User thường</span>
          {% endif %}
        </td>
        <td class="text-center">
          {% if user.is_active %}
          <span class="text-success small fw-bold">Active</span>
          {% else %}
          <span class="text-secondary small fw-bold">Inactive</span>
          {% endif %}
        </td>
        <td class="text-center">
          <a
            href="{% url 'account_edit' pk=user.pk %}"
            class="btn btn-sm btn-primary me-1"
            >Sửa</a
          >
          <a
            href="{% url 'account_delete' pk=user.pk %}"
            class="btn btn-sm btn-danger"
            >Xóa</a
          >
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="7" class="text-center">
          <div class="alert alert-info my-3">
            Không có người dùng nào khác trong hệ thống.
          </div>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
